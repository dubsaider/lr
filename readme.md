# Medical Document Processor

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏ –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –æ–±–ª–∞—Å—Ç–µ–π –∏–∑ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é.

## üöÄ –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ v0.3.0

- **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è** —Å —É–ª—É—á—à–µ–Ω–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é
- **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤** –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **–£–ª—É—á—à–µ–Ω–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è** –∏ –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞
- **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**

## –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏** - –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–Ω—ã—Ö –∫–≤–∞–¥—Ä–∞—Ç–æ–≤-–º–∞—Ä–∫–µ—Ä–æ–≤ (2 —Å–≤–µ—Ä—Ö—É, 4 —Å–Ω–∏–∑—É) –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—é
2. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –æ–±–ª–∞—Å—Ç–µ–π** - –Ω–∞—Ö–æ–¥–∏—Ç L –∏ R –æ–±–ª–∞—Å—Ç–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è –∫–≤–∞–¥—Ä–∞—Ç–æ–≤-–º–∞—Ä–∫–µ—Ä–æ–≤
3. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤** - —Å–æ–∑–¥–∞–µ—Ç –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ —Ç–µ—Å—Ç—ã —Å–æ —Å–ø–∏—Ä–∞–ª—è–º–∏ –ê—Ä—Ö–∏–º–µ–¥–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä—É—Å—Å–∫–æ–≥–æ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–æ–≤
4. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å PDF –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ (JPG, PNG, TIFF, BMP)
5. **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è** - —Å–æ–∑–¥–∞–µ—Ç –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –ò–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è GitHub
```bash
pip install git+https://github.com/dubsaider/lr.git
```

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```bash
git clone https://github.com/dubsaider/lr.git
cd lr
pip install -e ".[dev]"
```

### –° –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º–∏
```bash
pip install -e ".[dev,optimization]"
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ß–µ—Ä–µ–∑ CLI
```bash
# –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ–¥–∏–Ω —Ñ–∞–π–ª
medical-doc-processor process document.pdf

# –° –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π
medical-doc-processor process scan.jpg --debug --output-dir results --workers 4

# –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫–µ
medical-doc-processor batch ./scans --recursive --workers 2

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
medical-doc-processor benchmark --input-path test.jpg --iterations 5
```

### –ß–µ—Ä–µ–∑ Python
```python
from medical_doc_processor import process_medical_test, debug_lines, SpiralDocumentGenerator

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
rotation_angle = process_medical_test("document.pdf", output_dir="results")

# –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
debug_lines("document.pdf", output_dir="debug")

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å–æ —Å–ø–∏—Ä–∞–ª—è–º–∏ –ê—Ä—Ö–∏–º–µ–¥–∞
generator = SpiralDocumentGenerator(width=2339, height=1654, language="ru")
generator.generate_document(
    output_path="test_spiral_ru.jpg",
    probe_number="1",
    exercise="–°–ø–∏—Ä–∞–ª–∏ –ê—Ä—Ö–∏–º–µ–¥–∞"
)
```

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤** - –∏–∑–±–µ–≥–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
2. **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤
3. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã** - —É–ª—É—á—à–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–µ—Ç–µ–∫—Ü–∏–∏ –∫–≤–∞–¥—Ä–∞—Ç–æ–≤
4. **–í–µ–∫—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ NumPy –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è
5. **–ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã** - –±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```python
from medical_doc_processor.core.region_extractor import RegionExtractor

# –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π
extractor = RegionExtractor(
    output_dir="results",
    max_workers=4  # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤
)

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
rotation_angle, results = extractor.process_medical_test("document.pdf")

# –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
extractor.clear_cache()
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```bash
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ 10 –∏—Ç–µ—Ä–∞—Ü–∏—è—Ö
medical-doc-processor benchmark --input-path test.jpg --iterations 10

# –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∫–∞–∂–µ—Ç:
# - –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –±–µ–∑ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
# - –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º  
# - –ü—Ä–æ—Ü–µ–Ω—Ç —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CLI

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
```bash
# –ë–∞–∑–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
medical-doc-processor process input.pdf --output-dir results --debug

# –° –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π
medical-doc-processor process input.pdf --workers 4 --debug
```

### –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
```bash
# –ë–∞–∑–æ–≤–∞—è –ø–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
medical-doc-processor batch ./input_scans --recursive --output-dir ./output

# –° –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π
medical-doc-processor batch ./input_scans --recursive --workers 2
```

### –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
```bash
medical-doc-processor debug document.pdf
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–∞
```bash
medical-doc-processor validate image.png
```

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–æ—Ä–º–∞—Ç–∞—Ö
```bash
medical-doc-processor info
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
```bash
# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ —Å–ø–∏—Ä–∞–ª—è–º–∏ –ê—Ä—Ö–∏–º–µ–¥–∞ (—Ä—É—Å—Å–∫–∏–π, 200 DPI)
medical-doc-processor generate --output-dir generated_documents --language ru --count 1

# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∞–Ω–≥–ª–∏–π—Å–∫—É—é –≤–µ—Ä—Å–∏—é –≤ 300 DPI
medical-doc-processor generate --output-dir docs --language en --dpi 300 --count 1

# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å –Ω–æ–º–µ—Ä–æ–º –ø—Ä–æ–±—ã
medical-doc-processor generate --output-dir output --probe-number 5 --language ru
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤
```
tests/
‚îú‚îÄ‚îÄ data/                 # –ò—Å—Ö–æ–¥–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îî‚îÄ‚îÄ document.jpg      # –¢–µ—Å—Ç–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
‚îú‚îÄ‚îÄ generated/            # –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ original.jpg      # –ò—Å—Ö–æ–¥–Ω–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ rotated_90.jpg    # –ü–æ–≤–æ—Ä–æ—Ç 90¬∞
‚îÇ   ‚îú‚îÄ‚îÄ rotated_180.jpg   # –ü–æ–≤–æ—Ä–æ—Ç 180¬∞
‚îÇ   ‚îî‚îÄ‚îÄ rotated_270.jpg   # –ü–æ–≤–æ—Ä–æ—Ç 270¬∞
‚îî‚îÄ‚îÄ output/               # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤
    ‚îú‚îÄ‚îÄ visual_report/    # –í–∏–∑—É–∞–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã
    ‚îú‚îÄ‚îÄ simple_report/    # –£–ø—Ä–æ—â–µ–Ω–Ω—ã–µ –æ—Ç—á–µ—Ç—ã
    ‚îî‚îÄ‚îÄ minimal/          # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
```

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥—ã

1. **–ü–æ–º–µ—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç:**
   ```bash
   # –°–∫–æ–ø–∏—Ä—É–π—Ç–µ document.jpg –≤ tests/data/
   cp document.jpg tests/data/
   ```

2. **–°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:**
   ```bash
   # –°–æ–∑–¥–∞—Å—Ç 4 –≤–∞—Ä–∏–∞–Ω—Ç–∞ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏
   python tests/create_test_images.py
   ```

3. –ü—Ä–æ–ø—É—Å—Ç–∏—Ç–µ —à–∞–≥–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏, –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –Ω–∞ –ª–µ—Ç—É —Ç–µ—Å—Ç–∞–º–∏.

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

#### –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π –ø—Ä–æ–≥–æ–Ω
```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –∑–∞–ø—É—Å—Ç–∏—Ç –≤—Å–µ —Ç–µ—Å—Ç—ã
python tests/run_tests.py
```

#### –û—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã
```bash
# –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏
python -m pytest tests/test_orientation_detector.py -v

# –¢–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
python -m pytest tests/test_performance.py -v -m performance
```

#### –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤
```bash
# –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤–∏–∑—É–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç
python tests/test_visual_validation.py
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–π

–ü—Ä–æ–µ–∫—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç 4 –≤–∞—Ä–∏–∞–Ω—Ç–∞ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏:
- **original.jpg** - –∏—Å—Ö–æ–¥–Ω–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è
- **rotated_90.jpg** - –ø–æ–≤–æ—Ä–æ—Ç 90¬∞ –ø–æ —á–∞—Å–æ–≤–æ–π
- **rotated_180.jpg** - –ø–æ–≤–æ—Ä–æ—Ç 180¬∞
- **rotated_270.jpg** - –ø–æ–≤–æ—Ä–æ—Ç 270¬∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–≤–∞–¥—Ä–∞—Ç–æ–≤** - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –≤–æ –≤—Å–µ—Ö –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è—Ö
2. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è** - –¥–æ–ª–∂–Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –æ–∂–∏–¥–∞–µ–º–æ–π
3. **–í–∏–∑—É–∞–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã** - –≤ –ø–∞–ø–∫–µ `tests/output/`

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ —Å–æ–∑–¥–∞—é—Ç—Å—è:

- `*_L_region.jpg` - –∏–∑–≤–ª–µ—á–µ–Ω–Ω–∞—è L –æ–±–ª–∞—Å—Ç—å
- `*_R_region.jpg` - –∏–∑–≤–ª–µ—á–µ–Ω–Ω–∞—è R –æ–±–ª–∞—Å—Ç—å  
- `*_result_with_red_squares.jpg` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å –∫—Ä–∞—Å–Ω—ã–º–∏ —Ä–∞–º–∫–∞–º–∏
- `*_rotated_document.jpg` - –ø–æ–≤–µ—Ä–Ω—É—Ç—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
- `*_debug_lines.jpg` - –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (—Å –æ–ø—Ü–∏–µ–π `--debug`)

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

- **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è**: JPG, JPEG, PNG, BMP, TIFF, TIF
- **–î–æ–∫—É–º–µ–Ω—Ç—ã**: PDF (—Ç—Ä–µ–±—É–µ—Ç—Å—è PyMuPDF)

## –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã

1. **–ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞** - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è PDF –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
2. **–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –º–∞—Ä–∫–µ—Ä–æ–≤** - –ø–æ–∏—Å–∫ —á–µ—Ä–Ω—ã—Ö –∫–≤–∞–¥—Ä–∞—Ç–æ–≤ –º–µ—Ç–æ–¥–∞–º–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–≥–æ –∑—Ä–µ–Ω–∏—è
3. **–ê–Ω–∞–ª–∏–∑ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏** - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–æ–ª–æ–∂–µ–Ω–∏—è –ø–æ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—é –∫–≤–∞–¥—Ä–∞—Ç–æ–≤ (2 —Å–≤–µ—Ä—Ö—É, 4 —Å–Ω–∏–∑—É)
4. **–ê–≤—Ç–æ–ø–æ–≤–æ—Ä–æ—Ç** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–≤–æ—Ä–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—é
5. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –æ–±–ª–∞—Å—Ç–µ–π** - –≤—ã–¥–µ–ª–µ–Ω–∏–µ L –∏ R –æ–±–ª–∞—Å—Ç–µ–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–≤–∞–¥—Ä–∞—Ç–æ–≤-–º–∞—Ä–∫–µ—Ä–æ–≤

## –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
```bash
# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ dev –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -e ".[dev]"

# –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install pytest pytest-cov

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -e ".[optimization]"
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
```bash
# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ
python tests/create_test_images.py

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤
python tests/prepare_tests.py
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —á–µ—Ä–µ–∑ –∫–æ–¥:

- **–ü–æ—Ä–æ–≥ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**: `sensitivity` –≤ `SquareDetector`
- **–†–∞–∑–º–µ—Ä –∫–≤–∞–¥—Ä–∞—Ç–æ–≤**: `min_area` –∏ `max_area` 
- **–î–æ–ø—É—Å–∫ —Ñ–æ—Ä–º—ã**: `aspect_ratio` –¥–∏–∞–ø–∞–∑–æ–Ω
- **–û—Ç—Å—Ç—É–ø—ã –æ–±–ª–∞—Å—Ç–µ–π**: `padding` –ø–∞—Ä–∞–º–µ—Ç—Ä
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤**: `max_workers` –≤ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏

## –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞

–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç –º–æ—â–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å–æ —Å–ø–∏—Ä–∞–ª—è–º–∏ –ê—Ä—Ö–∏–º–µ–¥–∞:

- **–î–≤—É—è–∑—ã—á–Ω–æ—Å—Ç—å**: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–æ–≤
- **–†–∞–∑–Ω—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è**: 150, 200, 300 DPI
- **–ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤–µ—Ä—Å—Ç–∫–∞**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥ —Ä–∞–∑–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã
- **–ú–∞—Ä–∫–µ—Ä—ã –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏**: —á–µ—Ä–Ω—ã–µ –∫–≤–∞–¥—Ä–∞—Ç—ã –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏
- **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**: –Ω–æ–º–µ—Ä –ø—Ä–æ–±—ã, –Ω–∞–∑–≤–∞–Ω–∏–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞

–ö–∞–∂–¥—ã–π —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç:

1. **–®–∞–ø–∫–∞**: –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞, –Ω–æ–º–µ—Ä –ø—Ä–æ–±—ã, –¥–∞—Ç–∞
2. **–î–≤–µ —Å–ø–∏—Ä–∞–ª–∏ –ê—Ä—Ö–∏–º–µ–¥–∞**: –ª–µ–≤–∞—è (L) –∏ –ø—Ä–∞–≤–∞—è (R) —Å –º–∞—Ä–∫–µ—Ä–∞–º–∏ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏
3. **–ë–ª–æ–∫–∏ –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤—Ä–µ–º–µ–Ω–∏**: "–í—Ä–µ–º—è –õ _______ —Å–µ–∫" –∏ "–í—Ä–µ–º—è –ü _______ —Å–µ–∫"
4. **–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏**: 5 –ø—É–Ω–∫—Ç–æ–≤ —Å —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ–º –ø–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é —Ç–µ—Å—Ç–∞

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –ß–µ—Ä–µ–∑ CLI
```bash
# –ë–∞–∑–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è (—Ä—É—Å—Å–∫–∏–π, 200 DPI)
medical-doc-processor generate --output-dir docs --language ru --count 1

# –í—ã—Å–æ–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –ø–µ—á–∞—Ç–∏
medical-doc-processor generate --output-dir print --dpi 300 --language en

# –° –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
medical-doc-processor generate \
  --output-dir output \
  --language ru \
  --probe-number 3 \
  --exercise "–¢–µ—Å—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏" \
  --dpi 200
```

#### –ß–µ—Ä–µ–∑ Python API
```python
from medical_doc_processor import SpiralDocumentGenerator

# –°–æ–∑–¥–∞–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞
generator = SpiralDocumentGenerator(
    width=2339,    # –®–∏—Ä–∏–Ω–∞ –≤ –ø–∏–∫—Å–µ–ª—è—Ö (A4 landscape @ 200 DPI)
    height=1654,   # –í—ã—Å–æ—Ç–∞ –≤ –ø–∏–∫—Å–µ–ª—è—Ö
    language="ru"  # –Ø–∑—ã–∫: "ru" –∏–ª–∏ "en"
)

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞
generator.generate_document(
    output_path="spiral_test.jpg",
    probe_number="1",
    exercise="–°–ø–∏—Ä–∞–ª–∏ –ê—Ä—Ö–∏–º–µ–¥–∞"
)

# –ò–∑–º–µ–Ω–µ–Ω–∏–µ —è–∑—ã–∫–∞
generator.set_language("en")
generator.generate_document("spiral_test_en.jpg", probe_number="1")
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥—ã generate

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|----------|----------|--------------|
| `--output-dir` | –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è | `generated_documents` |
| `--count` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ | `1` |
| `--language` | –Ø–∑—ã–∫ (ru/en) | `ru` |
| `--dpi` | –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ (150/200/300) | `200` |
| `--probe-number` | –ù–æ–º–µ—Ä –ø—Ä–æ–±—ã | `1` |
| `--exercise` | –ù–∞–∑–≤–∞–Ω–∏–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è | "–°–ø–∏—Ä–∞–ª–∏ –ê—Ä—Ö–∏–º–µ–¥–∞" |

### –†–∞–∑–º–µ—Ä—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–æ DPI

- **150 DPI**: 1754√ó1240 px (–¥–ª—è —ç–∫—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞)
- **200 DPI**: 2339√ó1654 px (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ)
- **300 DPI**: 3508√ó2480 px (–≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –¥–ª—è –ø–µ—á–∞—Ç–∏)

–í—Å–µ —Ä–∞–∑–º–µ—Ä—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ñ–æ—Ä–º–∞—Ç—É A4 –≤ –∞–ª—å–±–æ–º–Ω–æ–π –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
medical_doc_processor/
‚îú‚îÄ‚îÄ core/                    # –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ image_loader.py         # –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ orientation_detector.py # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ square_detector.py      # –î–µ—Ç–µ–∫—Ü–∏—è –∫–≤–∞–¥—Ä–∞—Ç–æ–≤ (—Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π)
‚îÇ   ‚îú‚îÄ‚îÄ region_extractor.py     # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –æ–±–ª–∞—Å—Ç–µ–π (—Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π)
‚îÇ   ‚îî‚îÄ‚îÄ spiral_generator.py     # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–ø–∏—Ä–∞–ª–µ–π –ê—Ä—Ö–∏–º–µ–¥–∞
‚îú‚îÄ‚îÄ generators/              # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ spiral_document_generator.py # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
‚îú‚îÄ‚îÄ components/              # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ document_components.py   # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (—à–∞–ø–∫–∞, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –∏ —Ç.–¥.)
‚îú‚îÄ‚îÄ utils/                   # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ visualization.py         # –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ file_utils.py           # –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ text_utils.py           # –†–∞–±–æ—Ç–∞ —Å —Ç–µ–∫—Å—Ç–æ–º –∏ –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å
‚îî‚îÄ‚îÄ cli.py                   # CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
```

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ
- `opencv-python` - –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–µ –∑—Ä–µ–Ω–∏–µ
- `numpy` - —á–∏—Å–ª–µ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- `Pillow` - —Ä–∞–±–æ—Ç–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
- `PyMuPDF` - —Ä–∞–±–æ—Ç–∞ —Å PDF
- `click` - CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –¢–µ—Å—Ç–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- `pytest` - —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `pytest-cov` - –ø–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞
- `black` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- `flake8` - –ª–∏–Ω—Ç–∏–Ω–≥
- `mypy` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
- `pre-commit` - —Ö—É–∫–∏ –¥–ª—è Git

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- `numba` - JIT –∫–æ–º–ø–∏–ª—è—Ü–∏—è
- `scipy` - –Ω–∞—É—á–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è

## –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞:

- **Black** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **isort** - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤
- **flake8** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è –∫–æ–¥–∞
- **mypy** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
- **pre-commit** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ pre-commit

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ pre-commit
pip install pre-commit

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ö—É–∫–æ–≤
pre-commit install

# –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≤–µ—Ä–æ–∫ –Ω–∞ –≤—Å–µ—Ö —Ñ–∞–π–ª–∞—Ö
pre-commit run --all-files
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT - —Å–≤–æ–±–æ–¥–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è.

## –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏** - –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–Ω—ã—Ö –∫–≤–∞–¥—Ä–∞—Ç–æ–≤-–º–∞—Ä–∫–µ—Ä–æ–≤ (2 —Å–≤–µ—Ä—Ö—É, 4 —Å–Ω–∏–∑—É) –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—é
2. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –æ–±–ª–∞—Å—Ç–µ–π** - –Ω–∞—Ö–æ–¥–∏—Ç L –∏ R –æ–±–ª–∞—Å—Ç–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è –∫–≤–∞–¥—Ä–∞—Ç–æ–≤-–º–∞—Ä–∫–µ—Ä–æ–≤
3. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤** - —Å–æ–∑–¥–∞–µ—Ç –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ —Ç–µ—Å—Ç—ã —Å–æ —Å–ø–∏—Ä–∞–ª—è–º–∏ –ê—Ä—Ö–∏–º–µ–¥–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä—É—Å—Å–∫–æ–≥–æ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–æ–≤
4. **–ü–æ–¥–¥–µ—Ä–∂–∫a —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å PDF –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ (JPG, PNG, TIFF, BMP)
5. **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è** - —Å–æ–∑–¥–∞–µ—Ç –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –ò–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è GitHub
```bash
pip install git+https://github.com/dubsaider/lr.git
```

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```bash
git clone https://github.com/dubsaider/lr.git
cd lr
pip install -e ".[dev]"
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ß–µ—Ä–µ–∑ CLI
```bash
# –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ–¥–∏–Ω —Ñ–∞–π–ª
medical-doc-processor process document.pdf

# –° –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
medical-doc-processor process scan.jpg --debug --output-dir results

# –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫–µ
medical-doc-processor batch ./scans --recursive
```

### –ß–µ—Ä–µ–∑ Python
```python
from medical_doc_processor import process_medical_test, debug_lines, SpiralDocumentGenerator

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
rotation_angle = process_medical_test("document.pdf", output_dir="results")

# –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
debug_lines("document.pdf", output_dir="debug")

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å–æ —Å–ø–∏—Ä–∞–ª—è–º–∏ –ê—Ä—Ö–∏–º–µ–¥–∞
generator = SpiralDocumentGenerator(width=2339, height=1654, language="ru")
generator.generate_document(
    output_path="test_spiral_ru.jpg",
    probe_number="1",
    exercise="–°–ø–∏—Ä–∞–ª–∏ –ê—Ä—Ö–∏–º–µ–¥–∞"
)
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CLI

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
```bash
medical-doc-processor process input.pdf --output-dir results --debug
```

### –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
```bash
medical-doc-processor batch ./input_scans --recursive --output-dir ./output
```

### –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
```bash
medical-doc-processor debug document.pdf
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–∞
```bash
medical-doc-processor validate image.png
```

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–æ—Ä–º–∞—Ç–∞—Ö
```bash
medical-doc-processor info
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
```bash
# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ —Å–ø–∏—Ä–∞–ª—è–º–∏ –ê—Ä—Ö–∏–º–µ–¥–∞ (—Ä—É—Å—Å–∫–∏–π, 200 DPI)
medical-doc-processor generate --output-dir generated_documents --language ru --count 1

# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∞–Ω–≥–ª–∏–π—Å–∫—É—é –≤–µ—Ä—Å–∏—é –≤ 300 DPI
medical-doc-processor generate --output-dir docs --language en --dpi 300 --count 1

# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å –Ω–æ–º–µ—Ä–æ–º –ø—Ä–æ–±—ã
medical-doc-processor generate --output-dir output --probe-number 5 --language ru
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤
```
tests/
‚îú‚îÄ‚îÄ data/                 # –ò—Å—Ö–æ–¥–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îî‚îÄ‚îÄ document.jpg      # –¢–µ—Å—Ç–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
‚îú‚îÄ‚îÄ generated/            # –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ original.jpg      # –ò—Å—Ö–æ–¥–Ω–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ rotated_90.jpg    # –ü–æ–≤–æ—Ä–æ—Ç 90¬∞
‚îÇ   ‚îú‚îÄ‚îÄ rotated_180.jpg   # –ü–æ–≤–æ—Ä–æ—Ç 180¬∞
‚îÇ   ‚îî‚îÄ‚îÄ rotated_270.jpg   # –ü–æ–≤–æ—Ä–æ—Ç 270¬∞
‚îî‚îÄ‚îÄ output/               # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤
    ‚îú‚îÄ‚îÄ visual_report/    # –í–∏–∑—É–∞–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã
    ‚îú‚îÄ‚îÄ simple_report/    # –£–ø—Ä–æ—â–µ–Ω–Ω—ã–µ –æ—Ç—á–µ—Ç—ã
    ‚îî‚îÄ‚îÄ minimal/          # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
```

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥—ã

1. **–ü–æ–º–µ—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç:**
   ```bash
   # –°–∫–æ–ø–∏—Ä—É–π—Ç–µ document.jpg –≤ tests/data/
   cp document.jpg tests/data/
   ```

2. **–°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:**
   ```bash
   # –°–æ–∑–¥–∞—Å—Ç 4 –≤–∞—Ä–∏–∞–Ω—Ç–∞ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏
   python tests/create_test_images.py
   ```

3. –ü—Ä–æ–ø—É—Å—Ç–∏—Ç–µ —à–∞–≥–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏, –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –Ω–∞ –ª–µ—Ç—É —Ç–µ—Å—Ç–∞–º–∏.

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

#### –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π –ø—Ä–æ–≥–æ–Ω
```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –∑–∞–ø—É—Å—Ç–∏—Ç –≤—Å–µ —Ç–µ—Å—Ç—ã
python tests/run_tests.py
```

#### –û—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã
```bash
# –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏
python -m pytest tests/test_orientation_detector.py -v
```

#### –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤
```bash
# –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤–∏–∑—É–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç
python tests/test_visual_validation.py
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–π

–ü—Ä–æ–µ–∫—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç 4 –≤–∞—Ä–∏–∞–Ω—Ç–∞ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏:
- **original.jpg** - –∏—Å—Ö–æ–¥–Ω–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è
- **rotated_90.jpg** - –ø–æ–≤–æ—Ä–æ—Ç 90¬∞ –ø–æ —á–∞—Å–æ–≤–æ–π
- **rotated_180.jpg** - –ø–æ–≤–æ—Ä–æ—Ç 180¬∞
- **rotated_270.jpg** - –ø–æ–≤–æ—Ä–æ—Ç 270¬∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–≤–∞–¥—Ä–∞—Ç–æ–≤** - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –≤–æ –≤—Å–µ—Ö –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è—Ö
2. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è** - –¥–æ–ª–∂–Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –æ–∂–∏–¥–∞–µ–º–æ–π
3. **–í–∏–∑—É–∞–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã** - –≤ –ø–∞–ø–∫–µ `tests/output/`

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ —Å–æ–∑–¥–∞—é—Ç—Å—è:

- `*_L_region.jpg` - –∏–∑–≤–ª–µ—á–µ–Ω–Ω–∞—è L –æ–±–ª–∞—Å—Ç—å
- `*_R_region.jpg` - –∏–∑–≤–ª–µ—á–µ–Ω–Ω–∞—è R –æ–±–ª–∞—Å—Ç—å  
- `*_result_with_red_squares.jpg` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å –∫—Ä–∞—Å–Ω—ã–º–∏ —Ä–∞–º–∫–∞–º–∏
- `*_rotated_document.jpg` - –ø–æ–≤–µ—Ä–Ω—É—Ç—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
- `*_debug_lines.jpg` - –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (—Å –æ–ø—Ü–∏–µ–π `--debug`)

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

- **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è**: JPG, JPEG, PNG, BMP, TIFF, TIF
- **–î–æ–∫—É–º–µ–Ω—Ç—ã**: PDF (—Ç—Ä–µ–±—É–µ—Ç—Å—è PyMuPDF)

## –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã

1. **–ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞** - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è PDF –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
2. **–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –º–∞—Ä–∫–µ—Ä–æ–≤** - –ø–æ–∏—Å–∫ —á–µ—Ä–Ω—ã—Ö –∫–≤–∞–¥—Ä–∞—Ç–æ–≤ –º–µ—Ç–æ–¥–∞–º–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–≥–æ –∑—Ä–µ–Ω–∏—è
3. **–ê–Ω–∞–ª–∏–∑ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏** - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–æ–ª–æ–∂–µ–Ω–∏—è –ø–æ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—é –∫–≤–∞–¥—Ä–∞—Ç–æ–≤ (2 —Å–≤–µ—Ä—Ö—É, 4 —Å–Ω–∏–∑—É)
4. **–ê–≤—Ç–æ–ø–æ–≤–æ—Ä–æ—Ç** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–≤–æ—Ä–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—é
5. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –æ–±–ª–∞—Å—Ç–µ–π** - –≤—ã–¥–µ–ª–µ–Ω–∏–µ L –∏ R –æ–±–ª–∞—Å—Ç–µ–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–≤–∞–¥—Ä–∞—Ç–æ–≤-–º–∞—Ä–∫–µ—Ä–æ–≤

## –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
```bash
# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ dev –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -e ".[dev]"

# –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install pytest pytest-cov
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
```bash
# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ
python tests/create_test_images.py

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤
python tests/prepare_tests.py
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —á–µ—Ä–µ–∑ –∫–æ–¥:

- **–ü–æ—Ä–æ–≥ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**: `sensitivity` –≤ `SquareDetector`
- **–†–∞–∑–º–µ—Ä –∫–≤–∞–¥—Ä–∞—Ç–æ–≤**: `min_area` –∏ `max_area` 
- **–î–æ–ø—É—Å–∫ —Ñ–æ—Ä–º—ã**: `aspect_ratio` –¥–∏–∞–ø–∞–∑–æ–Ω
- **–û—Ç—Å—Ç—É–ø—ã –æ–±–ª–∞—Å—Ç–µ–π**: `padding` –ø–∞—Ä–∞–º–µ—Ç—Ä

## –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞

–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç –º–æ—â–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å–æ —Å–ø–∏—Ä–∞–ª—è–º–∏ –ê—Ä—Ö–∏–º–µ–¥–∞:

- **–î–≤—É—è–∑—ã—á–Ω–æ—Å—Ç—å**: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–æ–≤
- **–†–∞–∑–Ω—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è**: 150, 200, 300 DPI
- **–ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤–µ—Ä—Å—Ç–∫–∞**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥ —Ä–∞–∑–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã
- **–ú–∞—Ä–∫–µ—Ä—ã –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏**: —á–µ—Ä–Ω—ã–µ –∫–≤–∞–¥—Ä–∞—Ç—ã –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏
- **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**: –Ω–æ–º–µ—Ä –ø—Ä–æ–±—ã, –Ω–∞–∑–≤–∞–Ω–∏–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞

–ö–∞–∂–¥—ã–π —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç:

1. **–®–∞–ø–∫–∞**: –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞, –Ω–æ–º–µ—Ä –ø—Ä–æ–±—ã, –¥–∞—Ç–∞
2. **–î–≤–µ —Å–ø–∏—Ä–∞–ª–∏ –ê—Ä—Ö–∏–º–µ–¥–∞**: –ª–µ–≤–∞—è (L) –∏ –ø—Ä–∞–≤–∞—è (R) —Å –º–∞—Ä–∫–µ—Ä–∞–º–∏ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏
3. **–ë–ª–æ–∫–∏ –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤—Ä–µ–º–µ–Ω–∏**: "–í—Ä–µ–º—è –õ _______ —Å–µ–∫" –∏ "–í—Ä–µ–º—è –ü _______ —Å–µ–∫"
4. **–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏**: 5 –ø—É–Ω–∫—Ç–æ–≤ —Å —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ–º –ø–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é —Ç–µ—Å—Ç–∞

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –ß–µ—Ä–µ–∑ CLI
```bash
# –ë–∞–∑–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è (—Ä—É—Å—Å–∫–∏–π, 200 DPI)
medical-doc-processor generate --output-dir docs --language ru --count 1

# –í—ã—Å–æ–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –ø–µ—á–∞—Ç–∏
medical-doc-processor generate --output-dir print --dpi 300 --language en

# –° –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
medical-doc-processor generate \
  --output-dir output \
  --language ru \
  --probe-number 3 \
  --exercise "–¢–µ—Å—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏" \
  --dpi 200
```

#### –ß–µ—Ä–µ–∑ Python API
```python
from medical_doc_processor import SpiralDocumentGenerator

# –°–æ–∑–¥–∞–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞
generator = SpiralDocumentGenerator(
    width=2339,    # –®–∏—Ä–∏–Ω–∞ –≤ –ø–∏–∫—Å–µ–ª—è—Ö (A4 landscape @ 200 DPI)
    height=1654,   # –í—ã—Å–æ—Ç–∞ –≤ –ø–∏–∫—Å–µ–ª—è—Ö
    language="ru"  # –Ø–∑—ã–∫: "ru" –∏–ª–∏ "en"
)

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞
generator.generate_document(
    output_path="spiral_test.jpg",
    probe_number="1",
    exercise="–°–ø–∏—Ä–∞–ª–∏ –ê—Ä—Ö–∏–º–µ–¥–∞"
)

# –ò–∑–º–µ–Ω–µ–Ω–∏–µ —è–∑—ã–∫–∞
generator.set_language("en")
generator.generate_document("spiral_test_en.jpg", probe_number="1")
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥—ã generate

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|----------|----------|--------------|
| `--output-dir` | –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è | `generated_documents` |
| `--count` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ | `1` |
| `--language` | –Ø–∑—ã–∫ (ru/en) | `ru` |
| `--dpi` | –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ (150/200/300) | `200` |
| `--probe-number` | –ù–æ–º–µ—Ä –ø—Ä–æ–±—ã | `1` |
| `--exercise` | –ù–∞–∑–≤–∞–Ω–∏–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è | "–°–ø–∏—Ä–∞–ª–∏ –ê—Ä—Ö–∏–º–µ–¥–∞" |

### –†–∞–∑–º–µ—Ä—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–æ DPI

- **150 DPI**: 1754√ó1240 px (–¥–ª—è —ç–∫—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞)
- **200 DPI**: 2339√ó1654 px (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ)
- **300 DPI**: 3508√ó2480 px (–≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –¥–ª—è –ø–µ—á–∞—Ç–∏)

–í—Å–µ —Ä–∞–∑–º–µ—Ä—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ñ–æ—Ä–º–∞—Ç—É A4 –≤ –∞–ª—å–±–æ–º–Ω–æ–π –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
medical_doc_processor/
‚îú‚îÄ‚îÄ core/                    # –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ image_loader.py         # –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ orientation_detector.py # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ square_detector.py      # –î–µ—Ç–µ–∫—Ü–∏—è –∫–≤–∞–¥—Ä–∞—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ region_extractor.py     # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –æ–±–ª–∞—Å—Ç–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ spiral_generator.py     # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–ø–∏—Ä–∞–ª–µ–π –ê—Ä—Ö–∏–º–µ–¥–∞
‚îú‚îÄ‚îÄ generators/              # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ spiral_document_generator.py # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
‚îú‚îÄ‚îÄ components/              # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ document_components.py   # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (—à–∞–ø–∫–∞, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –∏ —Ç.–¥.)
‚îú‚îÄ‚îÄ utils/                   # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ visualization.py         # –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ file_utils.py           # –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ text_utils.py           # –†–∞–±–æ—Ç–∞ —Å —Ç–µ–∫—Å—Ç–æ–º –∏ –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å
‚îî‚îÄ‚îÄ cli.py                   # CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
```

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- `opencv-python` - –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–µ –∑—Ä–µ–Ω–∏–µ
- `numpy` - —á–∏—Å–ª–µ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- `Pillow` - —Ä–∞–±–æ—Ç–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
- `PyMuPDF` - —Ä–∞–±–æ—Ç–∞ —Å PDF (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `click` - CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –¢–µ—Å—Ç–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- `pytest` - —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `pytest-cov` - –ø–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞
- `black` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- `flake8` - –ª–∏–Ω—Ç–∏–Ω–≥

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT - —Å–≤–æ–±–æ–¥–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è.
